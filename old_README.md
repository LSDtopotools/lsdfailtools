lsdfailtools
==============

Set of python-c++ tools to use landslide model from Iverson (2000). It provides an easy interface to (i) run single simulations, (ii) run MC simulations from ranges of parameters and (iii) access all the output simplified or as time-depths series. 


Installation
------------
1. DOCKER INSTRUCTIONS:

Install Docker on your machine using the following link https://docs.docker.com/get-docker/
(note that these instructions may need administrator privileges to run properly)

Install the lsdfailtools software one of two ways:

To build locally from a local Dockerfile:

- Download the Dockerfile from INSERT LINK

- Place the Dockerfile in a directory then navigate there via the command line and run:

- `docker build --tag lsdft .`

- Ensure that you have already cloned the lsdfailtools repository somewhere on your machine either using git from the command line or by downloading from the github website directly and unzipping it (https://github.com/LSDtopotools/lsdfailtools.git) 
- `sudo docker run -it -v /path/to/your/cloned/repo:/LSDTopoTools -e NASA_USERNAME="username" -e NASA_PASSWORD="password"`

- Note: this requires a an account on the NASA EartData website (https://urs.earthdata.nasa.gov), make a login and password, click in Applications>Authorized Apps> Approve More Applications and select NASA GESDISC DATA ARCHIVE. This will be used in the PRECIPITATION section for downloading precipitaiton data.

To build from DockerHub: ARE WE DOING THIS?

- Create a folder into which to put all the files, then run:

- `docker run --rm -it -v /path/to/your/folder/you/just/made:/LSDTopoTools dockerhub/dockerhub_info`

- This should pull the repository along with setting up your Docker container ready for analysis

* You should now be inside the Docker container at the top directory of your cloned repo ready to begin!

* To escape your docker session at any point use `ctrl-d`

Now you need to install the software.

- Run the following commands:

```bash
python setup.py bdist_wheel
```
```bash
pip install dist/XXX.whl
```
- Where XXX is the name of the wheel generated by the python line!

- Rather than navigating to dist/ to check the name you can just autocomplete this using tab autocomplete e.g. type `pip install dis` then hit tab before enter

- Everything is now ready to run, note you will need to follow these steps everytime you want to use the software.

2. Old instructions 
**On Unix (Linux, OS X)**
 
 - You need gcc 5+ to install it
 - `pip install pybind11 numpy pandas`
 - (or `conda install -c conda-forge pybind11 numpy pandas`)
 - clone this repository
 - `python setup.py bdist_wheel`
 - `pip install dist/XXX.whl` <- XXX is the name of the wheel generated by the python line!

**On Windows (Requires Visual Studio 2015)**
 - Same steps but requires Visual Studio <=2015

Quick Start
-----------

The `examples` folder has quick example on running a single analysis or the MC simulation and exploring the results.


Authors
-------

Simon M. Mudd - University of Edinburgh
Boris Gailleton - University of Edinburgh - GFZ Potsdam
Guillaume ""Will"" Goodwin - University of Edinburgh - A University in Italy (I cannot remember which one sorry)
